bin_PROGRAMS = omi
AM_YFLAGS = -dv
CC = g++

#~ db_header = run/$(db)DbNode.h

omi_SOURCES = \
main.cpp \
interpreter.h \
interpreter.cpp \
error.h \
error.cpp \
plugin.h \
plugin.cpp \
run/numData.h \
run/numData.cpp \
run/tree/runTree.h \
run/tree/runTree.cpp \
run/tree/expNode.h \
run/tree/expNode.cpp \
run/tree/typeNode.h \
run/tree/typeNode.cpp \
run/table/symbols.h \
run/table/symbols.cpp \
run/table/classNode.h \
run/table/classNode.cpp \
run/table/funcNode.h \
run/table/funcNode.cpp \
run/table/idNode.h \
run/table/idNode.cpp \
run/table/sTable.h \
run/table/sTable.cpp \
run/operatorNode.h \
run/operatorNode.cpp \
run/operatorStrNode.h \
run/operatorStrNode.cpp \
run/operatorArrayNode.h \
run/operatorArrayNode.cpp \
run/operatorDateNode.h \
run/operatorDateNode.cpp \
run/operatorRegexpNode.h \
run/operatorRegexpNode.cpp \
run/fileNode.h \
run/fileNode.cpp \
run/processNode.h \
run/processNode.cpp \
run/stmtNode.h \
run/stmtNode.cpp \
lshParser.y \
lshScanner.l

AM_CPPFLAGS = -fPIC -DJSON='$(JSON)' -DSERVER='$(JSON)'  -DDATADIR='"$(datadir)"' -DDATABASE='"$(db_header)"' -DNUMTYPE='$(numType)' -DNUMPRECISION='$(numPrecision)' -DREFCTYPE='$(refCType)' -O3  -ansi -pedantic -g $(db_flag)
AM_CCFLAGS = -DJSON='"$(JSON)" -DDATADIR='"$(datadir)"' -DDATABASE='"$(db_header)"' -O3  -ansi -pedantic -g $(db_flag)
AM_LDFLAGS = -rdynamic -g 
LDADD =  -L/usr/include/boost/   -lm $(db_lib) -ldl

dev: $(filter-out main.o, $(am_omi_OBJECTS))
	ar rcs libomi.a $(filter-out main.o, $(am_omi_OBJECTS))  
install-dev: dev
	mkdir -p /usr/include/omi/run/
	cp run/*.h	/usr/include/omi/run
	cp plugin.h /usr/include/omi/
	cp error.h /usr/include/omi/
	cp lshParser.h /usr/include/omi/
	cp interpreter.h /usr/include/omi/
	cp omi.h /usr/include/omi/
	cp libomi.a /usr/lib

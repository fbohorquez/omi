var busqueda;var i=0;$('#textfield').typeahead({source:function(q,process){busqueda=q;q=limpiarCadena(q);return $.post('/json_nuevo_buscador.php',{q:q,WAltura:window.innerHeight},function(response){var data=new Array;for(var i in response){data.push(response[i]['id']
+"#"+ response[i]['name']
+"#"+ response[i]['img']
+"#"+ response[i]['name_raw']
+"#"+ response[i]['precio']
+"#"+ response[i]['valoracion']
+"#"+ response[i]['categoria']
+"#"+ response[i]['subcategoria']
+"#"+ response[i]['url']);}
return process(data);});},highlighter:function(item){var parts=item.split('#');var id=parts[0];var nombre=parts[1];var imagen=parts[2];var nombre_raw=parts[3];var precio=parts[4];var valoracion=parts[5];var categoria=parts[6];var subcategoria=parts[7];$i=0;if((nombre=='--categorias--')||(nombre=='--categorias-atrib--')){html='<div class="typeahead posi_izq cate">';html+='<div class="posi_izq" style="margin-left: 8px;width: 420px">';html+='<div class="posi_izq"><strong>Categor&iacute;a</strong></div>';html+='</div>';html+='<div class="posi_izq catego_resul2">'+ categoria+' > '+ subcategoria+'</div>';html+='</div>';$i++;}else if(nombre=='--busqueda--'){html='<div class="typeahead posi_izq busq">';html+='<div class="posi_izq" style="margin-left: 8px;width: 420px">';html+='<div class="posi_izq"><strong>Buscar en Pccomponentes:</strong></div>';html+='</div>';html+='<div class="posi_izq catego_resul"><strong>"'+ nombre_raw+'"</strong></div>';html+='</div>';$i++;}else if(nombre=='--sugerencia--'){html='<div class="typeahead posi_izq suge">';html+='<div class="posi_izq" style="margin-left: 8px;width: 420px">';html+='<div class="posi_izq"><strong>Sugerencia:</strong></div>';html+='</div>';html+='<div class="posi_izq catego_resul">Quiso decir "<strong>'+ nombre_raw+'</strong>"</div>';html+='</div>';$i++;}else{html='<div class="typeahead posi_izq prod">';html+='<div class="posi_izq"><img class="img_mini_buscador" src="'+ imagen+'" width="48" height="48" class="img-resulta"></div>';html+='<div class="posi_izq" style="margin-left: 8px;width: 300px">';html+='<div class="posi_izq">'+ nombre+'</div>';html+='</div>';html+='<div class="posi_der precio_resul">'+ precio+' &euro;</div>';html+='<div class="posi_izq catego_resul">'+ categoria+' > '+ subcategoria+'</div>';html+='<div class="posi_der rank" style="margin:5px 0px 0px 20px;width: 73px">';html+='<ul id="ul-ranking" style="float: left;width: 76px">';html+='<li class="current-rating" id="current-rating" style="width:'+(valoracion*15)+'px;">Currently 4/5 Stars.</li>';html+='</ul>';html+='</div>';html+='</div>';}
return html;},updater:function(item){var url="http://www.pccomponentes.com";var parts=item.split('#');if(parts[1]=='--categorias--'){$(location).attr('href',url+'/'+ parts[8]+'.html');}else if(parts[1]=='--categorias-atrib--'){$(location).attr('href',url+'/'+ parts[8]);}else if(parts[1]=='--busqueda--'){var $parametro=$('#textfield').val();$('#search').val($parametro);$('#form1').submit();}else if(parts[1]=='--sugerencia--'){$('#textfield').val(parts[3]).focus();$('#search').val(parts[3]);$('#form1').submit();}else{$(location).attr('href',url+'/'+ parts[8]+'.html');}
return parts[3];},minLength:3,items:15});function limpiarCadena(cadena){var cadenaNew;cadenaNew=cadena.replace("á","a");cadenaNew=cadenaNew.replace("é","e");cadenaNew=cadenaNew.replace("í","i");cadenaNew=cadenaNew.replace("ó","o");cadenaNew=cadenaNew.replace("ú","u");cadenaNew=cadenaNew.replace("Á","A");cadenaNew=cadenaNew.replace("É","E");cadenaNew=cadenaNew.replace("Í","I");cadenaNew=cadenaNew.replace("Ó","O");cadenaNew=cadenaNew.replace("Ú","U");return cadenaNew;}